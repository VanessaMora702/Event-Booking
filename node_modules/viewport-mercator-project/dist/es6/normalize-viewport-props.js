import WebMercatorViewport from"./web-mercator-viewport";import{mod}from"./math-utils";const MAX_LATITUDE=85.05113,MIN_LATITUDE=-85.05113;export default function normalizeViewportProps({width,height,longitude,latitude,zoom,pitch=0,bearing=0}){(-180>longitude||180<longitude)&&(longitude=mod(longitude+180,360)-180),(-180>bearing||180<bearing)&&(bearing=mod(bearing+180,360)-180);let flatViewport=new WebMercatorViewport({width,height,longitude,latitude,zoom}),topY=flatViewport.project([longitude,MAX_LATITUDE])[1],bottomY=flatViewport.project([longitude,MIN_LATITUDE])[1],shiftY=0;return bottomY-topY<height&&(zoom+=Math.log2(height/(bottomY-topY)),flatViewport=new WebMercatorViewport({width,height,longitude,latitude,zoom}),topY=flatViewport.project([longitude,MAX_LATITUDE])[1],bottomY=flatViewport.project([longitude,MIN_LATITUDE])[1]),0<topY?shiftY=topY:bottomY<height&&(shiftY=bottomY-height),shiftY&&(latitude=flatViewport.unproject([width/2,height/2+shiftY])[1]),{width,height,longitude,latitude,zoom,pitch,bearing}}
//# sourceMappingURL=normalize-viewport-props.js.map